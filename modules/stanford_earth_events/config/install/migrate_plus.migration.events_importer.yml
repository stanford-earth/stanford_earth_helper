uuid: 8e60773a-2b51-4e6d-8d53-a64be318442c
langcode: en
status: true
dependencies: {  }
id: events_importer
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags: null
migration_group: earth_events
label: 'Events importer'
source:
  plugin: url
  data_fetcher_plugin: file
  urls: 'http://events.stanford.edu/xml/drupal/v2.php?organization=266'
  data_parser_plugin: simple_xml
  item_selector: /EventList/Event
  fields:
    -
      name: guid
      label: GUID
      selector: guid
    -
      name: title
      label: 'Event Title'
      selector: title
    -
      name: field_s_event_description
      label: Description
      selector: description
    -
      name: field_s_event_audience
      label: Audience
      selector: audiences
    -
      name: field_s_event_date
      label: Date
      selector: isoEventDate
    # -
    #   name: field_s_event_image
    #   label: 'Image URL'
    #   selector: imageUrl
    -
      name: field_s_event_more_info
      label: 'More info'
      selector: link
    -
      name: field_s_event_public
      label: 'Public event?'
      selector: status
    -
      name: field_s_event_tags
      label: Tags
      selector: Keywords/tag
    -
      name: field_s_event_when
      label: 'When'
      selector: eventDate
    -
      name: field_s_event_where
      label: Location
      selector: locationText
  ids:
    guid:
      type: string
  constants:
    status: 1
    type: stanford_event
    timezone: 25200
    basic_html: basic_html
    minimal_html: minimal_html
    source_base_path: 'http://events.stanford.edu/'
process:
  status: constants/status
  type: constants/type
  title: title
  field_s_event_description/value: field_s_event_description
  field_s_event_description/format: constants/basic_html
  field_s_event_audience/value: field_s_event_audience
  field_s_event_date/value:
    -
      plugin: format_date
      source: field_s_event_date
      from_format: 'Y-m-d H:i:s O'
      to_format: U
      timezone: 'Etc/GMT'
    -
      plugin: format_date
      from_format: U
      to_format: 'Y-m-d\TH:i:s'
      timezone: 'Etc/GMT'
  field_s_event_image/target_id:
    -
      plugin: migration_lookup
      migration: events_image_importer
      source: guid
    -
      plugin: default_value
      default_value: null
  field_s_event_more_info/uri: field_s_event_more_info
  field_s_event_more_info/title: title
  field_s_event_public/value: field_s_event_public
  # field_s_event_tags:
  #   -
  #     source: field_s_event_tags
  #     plugin: entity_generate
  #     entity_type: taxonomy_term
  #     bundle_key: vid
  #     bundle: stanford_event_tags
  #     value_key: name
  #   -
  #     plugin: default_value
  #     default_value: null
  field_s_event_when/value: field_s_event_when
  field_s_event_where/value: field_s_event_where
destination:
  plugin: 'entity:node'
migration_dependencies:
  required:
    - migrate_plus.migration.events_image_importer
